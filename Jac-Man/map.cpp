#include "map.h"

Map::Map() {
	int tempMap[ROWS][COLS] = {
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,1,1},
        {1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1},
        {1,1,2,1,0,0,0,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0,0,1,2,1,2,1,1},
        {1,1,2,1,1,1,1,1,1,1,1,0,1,1,1,2,1,0,1,1,1,1,1,1,1,1,0,1,2,1,0,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1},
        {1,1,2,2,2,2,2,2,2,2,1,1,1,2,2,2,1,0,1,1,1,0,0,0,1,1,0,1,2,1,0,1,3,2,2,2,2,2,2,2,2,2,2,2,1,1},
        {1,1,1,1,1,1,2,1,1,2,2,2,2,2,1,2,1,0,0,0,0,0,0,0,0,0,0,1,2,1,0,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1},
        {1,1,1,1,1,1,2,2,2,3,1,1,1,2,1,2,1,0,0,0,1,1,0,1,1,0,0,1,2,1,0,0,0,0,0,0,0,0,1,2,1,1,1,1,1,1},
        {1,1,1,1,1,1,2,1,1,1,1,0,1,2,1,2,1,0,0,0,1,0,0,0,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1},
        {0,4,0,0,0,0,2,1,0,0,0,0,1,2,1,2,1,0,0,0,1,0,1,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,4,0},
        {1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,2,1,1,1,1,1,0,1,0,1,1,1,2,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1},
        {1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,1,2,1,0,1,2,1,1,1,1,1,1},
        {1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,0,0,0,0,0,1,2,1,0,1,2,1,1,1,1,1,1},
        {1,1,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,1,2,1,0,1,2,2,2,2,2,1,1},
        {1,1,3,1,1,1,1,2,1,1,1,1,2,1,0,1,1,1,1,1,1,1,1,1,1,0,1,2,1,0,1,1,1,0,1,3,1,0,1,2,1,1,1,2,1,1},
        {1,1,2,1,0,0,1,1,1,0,0,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,0,1,3,1,0,1,1,1,0,1,2,1,0,1,2,1,1},
        {1,1,2,1,0,0,0,0,0,0,0,1,2,1,0,0,1,1,1,1,1,1,1,1,0,0,1,2,1,0,1,2,1,0,0,0,0,0,1,2,1,0,1,2,1,1},
        {1,1,2,1,0,1,1,1,1,1,0,1,2,1,0,0,1,2,2,2,2,3,2,1,0,0,1,2,1,0,1,2,1,0,0,0,0,0,1,2,1,0,1,2,1,1},
        {1,1,2,1,0,1,2,2,2,1,0,1,2,1,0,0,1,2,1,1,1,1,2,1,0,0,1,2,1,0,1,2,1,0,0,0,0,0,1,2,1,0,1,2,1,1},
        {1,1,2,1,1,1,2,1,2,1,1,1,2,1,1,1,1,2,1,1,1,1,2,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,2,1,1,1,2,1,1},
        {1,1,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1},
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
    };

    // 맵 데이터 복사
    for (int i = 0; i < ROWS; ++i)
        for (int j = 0; j < COLS; ++j)
            map[i][j] = tempMap[i][j];
}

// 맵 그리기 
void Map::drawMap() const {
    gotoxy(4, 3);
    for (int i = 0; i < ROWS; ++i) {
        for (int j = 0; j < COLS; ++j) {
            switch (map[i][j]) {
            case 0: // 빈 공간
                std::cout << "  ";
                break;
            case 1: // 벽
                std::cout << "■";
                break;
            case 2: // 점수 아이템
                std::cout << "○";
                break;
            case 3: // 파워 아이템
                std::cout << "●";
                break;
            case 4: // 출입구/포탈
                std::cout << "  ";
                break;
            default: // 알 수 없는 값
                std::cout << "??";
                break;
            }
        }
        std::cout << std::endl;
        std::cout << "    "; // 줄 간격 맞추기
    }
}

bool Map::isWall(int x, int y) const {
    if (x < 0 || x >= COLS || y < 0 || y >= ROWS) {
        return true; // 맵 외곽은 벽으로 처리
    }
    return map[y][x] == 1;
}

// 특정 위치의 타일 값을 설정
void Map::setTile(int x, int y, int value) {
    if (x >= 0 && x < COLS && y >= 0 && y < ROWS) {
        map[y][x] = value;
    }
}

// 특정 위치의 타일 값을 가져옴
int Map::getTile(int x, int y) const {
    if (x >= 0 && x < COLS && y >= 0 && y < ROWS) {
        return map[y][x];
    }
    return -1; // 맵 외곽에 대한 기본값
}

